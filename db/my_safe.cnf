[mysqld]
# Basic paths (from original config)
basedir=/home/wuy/ShannonBase/cmake_build
datadir=/home/wuy/ShannonBase/db/data
tmpdir=/tmp
port=3307
socket=/home/wuy/ShannonBase/db/mysql.sock

# Logging
log_error=/home/wuy/ShannonBase/db/data/shannonbase.err
general_log = 1
general_log_file = /home/wuy/ShannonBase/db/general.log

# MySQL X Plugin
mysqlx_socket=/home/wuy/ShannonBase/db/mysqlx.sock
mysqlx_port=33060

# Performance settings - REDUCED for stability
innodb_buffer_pool_size=1G
innodb_redo_log_capacity=2147483648  # 2GB (increased for bulk loading - was 512MB)
innodb_flush_log_at_trx_commit=2  # Faster for bulk loading
innodb_flush_method=O_DIRECT
innodb_doublewrite=1  # Enable for safety

# Reduced parallelism to avoid race conditions
max_connections=100  # Reduced from 2000
innodb_thread_concurrency=4  # Limit concurrent threads
innodb_read_io_threads=4  # Reduced from 8
innodb_write_io_threads=4  # Reduced from 8

# File handling safety
innodb_use_native_aio=0  # Disable native AIO to avoid filesystem issues
innodb_file_per_table=1

# Additional safety for parallel operations
innodb_sync_array_size=1  # Reduce sync array to limit parallelism

# Bulk insert settings
bulk_insert_buffer_size=256M
max_allowed_packet=1G

# Enable local infile
local_infile=1
secure_file_priv=

# Character set
character-set-server=utf8mb4
collation-server=utf8mb4_unicode_ci

[mysql]
port=3307
socket=/home/wuy/ShannonBase/db/mysql.sock
local_infile=1
default-character-set=utf8mb4
